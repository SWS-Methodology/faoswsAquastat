[
["External.html", "Chapter 1 The faoswsAquastatExternal module 1.1 Aims 1.2 Workflow 1.3 Running the module 1.4 Did the module..", " Chapter 1 The faoswsAquastatExternal module 1.1 Aims The faoswsAquastatExternal is essentially a data harvester that emerges as demand for making the AQUASTAT process of extracting and reshaping data from external sources (web databases) easier. Thus, the faoswsAquastatExternal module: 1.1.1 Identifies AQUASTAT external data sources The module needs to identify the external data used by AQUASTAT. This identification is made with the help of the SWS data table aquas_external_sources which has: element_code. AQUASTAT element codes; element_name. AQUASTAT element names; source_name. External source name; source_item_code. The item code of the AQUASTAT element in the external data source; If the item is not applicable, the cell is blank. source_element_code. The element code of the AQUASTAT element in the external data source. If the element is not applicable, the cell is blank. data_link. The electronic address containing a downloadable version of data (.xsl, .csv, .zip, .json files) Table 1.1: AQUASTAT external sources element_code element_name source source_item_code source_element_code data_link 4100 Total area of the country (excl. coastal water) FAOSTAT 6600 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4101 Arable land area FAOSTAT 6621 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4102 Permanent crops area FAOSTAT 6650 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4103 Cultivated area (arable land + permanent crops) FAOSTAT 6620 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4104 Total population FAOSTAT 3010 511 http://fenixservices.fao.org/faostat/static/bulkdownloads/Population_E_All_Data_(Normalized).zip 4105 Rural population FAOSTAT 3010 551 http://fenixservices.fao.org/faostat/static/bulkdownloads/Population_E_All_Data_(Normalized).zip 4106 Urban population FAOSTAT 3010 561 http://fenixservices.fao.org/faostat/static/bulkdownloads/Population_E_All_Data_(Normalized).zip 4111 Human Development Index (HDI) [highest = 1] UNDP 137506 http://hdr.undp.org/sites/default/files/2018_all_indicators.xlsx 4112 Gross Domestic Product (GDP) FAOSTAT 22008 6110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Macro-Statistics_Key_Indicators_E_All_Data_(Normalized).zip 4113 Agriculture, value added (% GDP) FAOSTAT 22016 6110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Macro-Statistics_Key_Indicators_E_All_Data_(Normalized).zip 4114 Total population with access to improved drinking-water source (JMP) JMP(WHO/UNICEF) Water Tab/ Column F https://washdata.org/data/country/WLD/download 4115 Rural population with access to improved drinking-water source (JMP) JMP(WHO/UNICEF) Water Tab/ Column K https://washdata.org/data/country/WLD/download 4116 Urban population with access to improved drinking-water source (JMP) JMP(WHO/UNICEF) Water Tab/ Column P https://washdata.org/data/country/WLD/download 4449 Population economically active ILO EAP_2EAP_SEX_AGE_NB https://www.ilo.org/ilostat-files/WEB_bulk_download/indicator/EAP_2EAP_SEX_AGE_NB_A.csv.gz 4458 GDP per capita FAOSTAT 22014 6107 http://fenixservices.fao.org/faostat/static/bulkdownloads/Macro-Statistics_Key_Indicators_E_All_Data_(Normalized).zip 4472 National Rainfall Index (NRI) FAOCLIMPAG No regular update 4473 Number of people undernourished (3-year average) FAOSTAT 210011 6132 http://fenixservices.fao.org/faostat/static/bulkdownloads/Food_Security_Data_E_All_Data_(Normalized).zip 4474 Prevalence of undernourishment (3-year average) FAOSTAT 210041 6121 http://fenixservices.fao.org/faostat/static/bulkdownloads/Food_Security_Data_E_All_Data_(Normalized).zip 4537 Gender Inequality Index (GII) UNDP 68606 http://hdr.undp.org/sites/default/files/2018_all_indicators.xlsx 4541 Interannual variability (WRI) WORLD_RESOURCES_INSTITUTE No regular update 4542 Seasonal variability (WRI) WORLD_RESOURCES_INSTITUTE No regular update 4543 Flood occurrence (WRI) WORLD_RESOURCES_INSTITUTE No regular update 4546 Industry, value added to GDP WORLD_BANK FAOSTAT? UNSD? Mining, Manufacturing, Utilities (ISIC C-E) + Construction (ISIC F) http://data.un.org/Data.aspx?q=gross+value+added+US+current&amp;d=SNAAMA&amp;f=grID%3a201%3bcurrID%3aUSD%3bpcFlag%3a0 4547 Services, value added to GDP WORLD_BANK FAOSTAT? UNSD? Wholesale, retail trade, restaurants and hotels (ISIC G-H) + Transport, storage and communication (ISIC I) + Other Activities (ISIC J-P) http://data.un.org/Data.aspx?q=gross+value+added+US+current&amp;d=SNAAMA&amp;f=grID%3a201%3bcurrID%3aUSD%3bpcFlag%3a0 4548 Agriculture, value added to GDP WORLD_BANK FAOSTAT? UNSD? Agriculture, hunting, forestry, fishing (ISIC A-B) http://data.un.org/Data.aspx?q=gross+value+added+US+current&amp;d=SNAAMA&amp;f=grID%3a201%3bcurrID%3aUSD%3bpcFlag%3a0 4549 Environmental Flow Requirements FAO/IWMI No regular update (LTA) 4558 GDP Deflators FAOSTAT 22024 6107 http://fenixservices.fao.org/faostat/static/bulkdownloads/Deflators_E_All_Data_(Normalized).zip 4559 Land area FAOSTAT 6601 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4560 Inland watersd FAOSTAT 6680 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4561 Total area of the country (incl. coastal water) FAOSTAT 6600 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4562 Land area equipped for irrigation FAOSTAT 6690 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4563 Land area actually irrigated FAOSTAT 6616 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4564 Agriculture area actually irrigated FAOSTAT 6611 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4565 Cropland area actually irrigated FAOSTAT 6694 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4566 Permanent meadows &amp; pastures area actually irrigated FAOSTAT 6657 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip 4567 Forestry area actually irrigated FAOSTAT 6695 5110 http://fenixservices.fao.org/faostat/static/bulkdownloads/Inputs_LandUse_E_All_Data_(Normalized).zip After identification, the module downloads the data to temporary files and read it in to start the processing. 1.1.2 Reshapes the data sources Data from different sources are likely to occur in different formats. Therefore, after the download of the data, the module needs to apply a different reshaping strategy to each data source. Regardless the initial shape of the external AQUASTAT data sources, the module is going to convert each single source into an SWS long format dataset with geographicAreaM49, aquastatElement, timePointYears, flagOvservationStatus, flagMethod. The flagOvservationStatus and flagMethod are “X” and “c” for all data extracted by the faoswsAquasatExternal module. 1.1.3 Maps out AQUASTAT to external sources With the data already reshaped, it is effortless for the module to keep relevant AQUASTAT elements since the aqua_external_source data table provides the means for correctly mapping out the original external data code to AQUASTAT codes. 1.1.4 Maps out FAOSTAT areas to UNSDM49 The SWS data table m49_fs_iso_mapping has the correspondence among different international codes (FAOSTAT, UNSDM49, ISO2, ISO3) for geographic areas and is used to convert area codes in the external sources to UNSDM49 codes which is the standard in the SWS. 1.1.5 Saves the output back into SWS Finally, the module merges the sources into a single dataset. This output is an SWS-compliant long-format dataset name aquastat_external that is saved by the user in the SWS and will be ready to serve as an input of the faoswsAquastatUpdate module. 1.2 Workflow Figure 1.1: Workflow of the faoswsAquastatExternal module. 1.2.1 Only Possible Workflow FAOSTAT, the ONLY REACHABLE DATA SOURCE: The harvest of all external data was proved to be not possible due to IT security reasons. During the development, it was noticed that SWS modules running in SWS could not access external downloadable links. The only exceptions are the data from FAOSTAT. Therefore, while the module does not have the clearance to download external data, the faoswsAquastatExternal data will only harvest FAOSTAT data. Figure 1.2: Workflow of the faoswsAquastatExternal module HARVESTING FAOSTAT data only. 1.3 Running the module Log in the SWS; Click on New Query; Select AQUASTAT domain and aquastat_external dataset; Select whatever geographicM49Area, aquastatElement, and timePointYears; Figure 1.3: Steps 1 to 4 The faoswsAquastatExternal searches and downloads data from external sources.; therefore, what the user is selecting in the query is irrelevant for the module’s output. Run the query and get an empty session; Figure 1.4: Empty SWS session of the aquastat_external dataset The aquastat_external dataset has already been saved in the SWS database to prop up the faoswsAquastatUpdate module development. It means that rather than obtaining an empty session, the user will see the session populated with the latest run of the faoswsAquastatExternal. If the user knows that the External sources HAVE BEEN UPDATED, he/she can run the module to get a current external dataset. 6. Click on Run plugin on the top-right. Select the faoswsAquastatExternal module and click on Run plugin; Figure 1.5: Select the AquastatExternal plugin and run it 8. Wait for the results to appear in the session; Figure 1.6: Select the AquastatExternal plugin output in the session Click on Save to dataset; The aquastat_external dataset has already been saved in the SWS database to prop up the faoswsAquastatUpdate module development. If the user knows that the External sources have not been updated, he/she does not neeed to save the dataset gain. 10. Email to the user. Figure 1.7: The AquastatExternal output is emailed to the user. 1.4 Did the module.. The module has met the expectations concerning data from FAOSTAT. However, due to security reasons, the downloadable links could not be accessed by the plugin. In any case, *ALL FAOSTAT VARIABLES WERE CORRECTLY HARVESTED AND MAPPED TO AQUASTAT**. "]
]
